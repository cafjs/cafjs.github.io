{"version":3,"sources":["webpack:///./src/components/layoutMDX.js","webpack:///./src/pages/collaborative.mdx"],"names":["docsLayout","Link","LayoutMDX","children","data","pageInfo","useStaticQuery","components","siteTitle","site","siteMetadata","title","isDocs","className","Date","getFullYear","name","_frontmatter","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","mdxType","parentName","to","isMDXComponent"],"mappings":"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","file":"component---src-pages-collaborative-mdx-792138cd80fc1a1941e3.js","sourcesContent":["import React from 'react';\nimport { useStaticQuery, graphql, Link } from 'gatsby';\nimport { MDXProvider } from \"@mdx-js/react\";\n\nimport Header from './header';\n\nconst docsLayout = {Link};\n\nconst LayoutMDX = ({ children, pageInfo }) => {\n    const data = useStaticQuery(graphql`\n      query SiteTitleQuery2 {\n        site {\n          siteMetadata {\n            title\n          }\n        }\n      }\n    `);\n\n    return (\n        <>\n          <MDXProvider components={docsLayout}>\n            <Header siteTitle={data.site.siteMetadata.title}  isDocs={false} />\n            <main><div className=\"mdx-article docs-page\">{children}</div></main>\n            <footer>\n              <div className='footer-bottom text-center py-5'>\n                <span>Â© Copyright {new Date().getFullYear()} Caf.js Labs LLC</span>\n              </div>\n            </footer>\n          </MDXProvider>\n        </>\n    );\n};\n\nexport default LayoutMDX;\n","import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/antlai/git/caf_gatsbysite/src/components/layoutMDX.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst Link = makeShortcode(\"Link\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h2>{`Collaborative Multi-Tenancy`}</h2>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"640px\",\n          \"width\": \"272px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"66.87116564417178%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"display\": \"block\"\n          }\n        }}></span>{`\n  `}<img parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-image\",\n          \"alt\": \"\",\n          \"title\": \"\",\n          \"src\": \"/static/cf04124c4d1747a46d8a78d1d9a65aba/c08c5/samuel-sianipar-scUBcasSvbE-unsplash.jpg\",\n          \"srcSet\": [\"/static/cf04124c4d1747a46d8a78d1d9a65aba/d2f63/samuel-sianipar-scUBcasSvbE-unsplash.jpg 163w\", \"/static/cf04124c4d1747a46d8a78d1d9a65aba/c989d/samuel-sianipar-scUBcasSvbE-unsplash.jpg 325w\", \"/static/cf04124c4d1747a46d8a78d1d9a65aba/c08c5/samuel-sianipar-scUBcasSvbE-unsplash.jpg 640w\"],\n          \"sizes\": \"(max-width: 640px) 100vw, 640px\",\n          \"style\": {\n            \"width\": \"100%\",\n            \"height\": \"100%\",\n            \"margin\": \"0\",\n            \"verticalAlign\": \"middle\",\n            \"position\": \"absolute\",\n            \"top\": \"0\",\n            \"left\": \"0\"\n          },\n          \"loading\": \"lazy\"\n        }}></img>{`\n    `}</span>{`Multi-tenancy is kind of boring. Isolate your customers. Ensure a fair distribution of resources among them. Done.`}</p>\n    <p>{`But when we add the word `}<strong parentName=\"p\">{`collaborative`}</strong>{`, everything changes. Bootstrap trust between strangers. Help them to communicate and share. The success of many apps depends on getting this right.`}</p>\n    <p>{`How to bootstrap trust? Repeatability and control. With repeatability, we can link interactions over time to build a reputation. With control, we create a safe environment that encourages risk-taking.`}</p>\n    <p><em parentName=\"p\">{`Caf.js`}</em>{` provides repeatibility and control for your app with a  `}<Link to=\"/docs/documentation#trusted-bus\" mdxType=\"Link\">{`Trusted Bus`}</Link>{`. A `}<em parentName=\"p\">{`Trusted Bus`}</em>{` mediates interactions between  `}<Link to=\"/docs/documentation#cloud-assistant\" mdxType=\"Link\">{`Cloud Assistants (CAs)`}</Link>{`, authenticating requests, and enforcing your access control policy.`}</p>\n    <p><em parentName=\"p\">{`Caf.js`}</em>{` implements high level communication services on top of the `}<em parentName=\"p\">{`Trusted Bus`}</em>{`. For example, to support a `}<Link to=\"/docs/documentation#publish-subscribe\" mdxType=\"Link\">{`publish-subscribe`}</Link>{` model, or `}<Link to=\"/docs/documentation#sharedmap\" mdxType=\"Link\">{`replicate data`}</Link>{` with Distributed Data Structures (DDS).`}</p>\n    <p>{`CAs access communication services with `}<em parentName=\"p\">{`transactional plugins`}</em>{`. They see replicated data as read-only, internal state. This leads to a simpler programming model, which recovers from failures transparently. See the `}<Link to=\"/orchestration\" mdxType=\"Link\">{`Reliable Service Orchestration`}</Link>{` section for details.`}</p>\n    <p>{`Let's describe a use case, and then we dig into the details.`}</p>\n    <hr />\n    <h4>{`Worldwide coordination of device actions`}</h4>\n    <p><em parentName=\"p\">{`Warning: do not use `}</em>{`Caf.js`}<em parentName=\"p\">{` for safety critical applications.`}</em></p>\n    <p>{`Bring your own gadget. Register it with a `}<em parentName=\"p\">{`Caf.js`}</em>{` app to create a `}<em parentName=\"p\">{`reverse service worker`}</em>{` (see the `}<Link to=\"/permanent\" mdxType=\"Link\">{`Permanent Presence`}</Link>{` section). Decide who can access it. Choose the tags your device subscribes to. Every time one of your friends posts an action using one of these tags your gadget will respond.`}</p>\n    <p>{`And here comes the fun part. Gadgets can use `}<Link to=\"/docs/documentation#iot-device\" mdxType=\"Link\">{`Timed Bundles`}</Link>{` to start actions based on Coordinated Universal Time (UTC), not just when the action arrives. An action could also contain a sequence of commands, spaced in time. And the `}<em parentName=\"p\">{`Caf.js`}</em>{` `}<Link to=\"/docs/documentation#client\" mdxType=\"Link\">{`client library`}</Link>{` helps gadgets to synchronize clocks with the Cloud.`}</p>\n    <p>{`This means that, given a second or two for propagation, we can `}<strong parentName=\"p\">{`synchronize`}</strong>{` actions, within a hundred milliseconds of each other, on `}<strong parentName=\"p\">{`hundreds of thousands of devices across the world`}</strong>{`. And soon it will be millions.`}</p>\n    <p>{`Your next Zoom party will never be the same.`}</p>\n    <p>{`Moreover, not all posts are created by humans. See the `}<Link to=\"/autonomous\" mdxType=\"Link\">{`Autonomous Compute`}</Link>{` section to learn how to inject posts with continuous queries.`}</p>\n    <p>{`And not all endpoints are gadgets. A `}<em parentName=\"p\">{`reverse service worker`}</em>{` can also represent other app instances or services. Coordination is not only for the physical world.`}</p>\n    <p>{`The `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/cafjs/caf_tweetiot.git\"\n      }}>{`TweetIoT`}</a>{` app puts all these ideas to practice. Hashtags in posts trigger gadget actions. Delegation simplifies access control policies based on groups.  The remarkable part is that the cloud backend is only `}<strong parentName=\"p\">{`154 lines of JavaScript`}</strong>{`.`}</p>\n    <hr />\n    <p>{`How are these experiences implemented with `}<em parentName=\"p\">{`Caf.js`}</em>{`?`}</p>\n    <h4>{`Trusted Bus`}</h4>\n    <p>{`CAs authenticate requests before injecting them in the `}<Link to=\"/docs/documentation#trusted-bus\" mdxType=\"Link\">{`Trusted Bus`}</Link>{`. Since a CA name contains the name of the CA owner, the true owner of each request is always known.`}</p>\n    <p>{`When a request reaches a bus endpoint, a check ensures that the request owner is allowed to invoke the request method. A request method can also change behavior depending on who calls it.`}</p>\n    <p>{`Decentralized authorization systems, such as SDSI, inspired our access control policies. Each owner maintains a local namespace, mapping names to principals. When several principals have the same local name, they form a group. Policy associates methods with allowed principals, or groups of allowed principals.`}</p>\n    <p>{`Names can also refer to local names in other namespaces, delegating the task of maintaining group membership to other owners. These owners could further delegate to other owners. However, trust is not a transitive property, as Facebook users learned the hard way, and delegation chains tend to be short.`}</p>\n    <p>{`CAs use `}<em parentName=\"p\">{`SharedMaps`}</em>{`, described next, to represent groups. Group updates propagate in milliseconds. The security library handles link traversal between `}<em parentName=\"p\">{`SharedMaps`}</em>{` to implement delegation.`}</p>\n    <h4>{`SharedMap`}</h4>\n    <p>{`A `}<Link to=\"/docs/documentation#sharedmap\" mdxType=\"Link\">{`SharedMap`}</Link>{` is a single writer-multiple reader DDS that can efficiently replicate data across many CAs. CAs see this data as internal state. The writer CA is the owner, providing a scoped name for the `}<em parentName=\"p\">{`SharedMap`}</em>{`.`}</p>\n    <p>{`CAs blend with `}<em parentName=\"p\">{`SharedMaps`}</em>{` in a novel way. Adding a `}<em parentName=\"p\">{`SharedMap`}</em>{` does not change the semantics of the Actor Model, and it can always be replaced by extra requests. This means that we never introduce deadlocks or data races. The application just scales better and with less memory.`}</p>\n    <p><em parentName=\"p\">{`SharedMaps`}</em>{` can be replicated in the Cloud, in devices, or in the browser. They can also contain serialized methods. They are updated with a `}<em parentName=\"p\">{`transactional plugin`}</em>{`, ensuring that changes to both code and data are atomic, and only visible when they respect serialization.`}</p>\n    <p>{`A `}<em parentName=\"p\">{`SharedMap`}</em>{` provides a safe mechanism to update code and data everywhere.`}</p>\n    <h4>{`Publish-Subscribe`}</h4>\n    <p>{`Our `}<Link to=\"/docs/documentation#publish-subscribe\" mdxType=\"Link\">{`implementation`}</Link>{` supports two kinds of topics:`}</p>\n    <ol>\n      <li parentName=\"ol\"><strong parentName=\"li\">{`Private`}</strong>{`: similar to a blog. There is only one CA that can publish messages, but anybody can subscribe to receive them.`}</li>\n      <li parentName=\"ol\"><strong parentName=\"li\">{`Forum`}</strong>{`: anybody can publish or subscribe, but subscribers can filter publishers by setting `}<em parentName=\"li\">{`Trusted Bus`}</em>{` policies.`}</li>\n    </ol>\n    <p><em parentName=\"p\">{`SharedMap`}</em>{` and `}<em parentName=\"p\">{`Publish-Subscribe`}</em>{` complement each other well. The former provides cheap, silent updates to many CAs. The latter triggers an action on each subscribed CA, and this is more expensive, but needed for external interaction.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}