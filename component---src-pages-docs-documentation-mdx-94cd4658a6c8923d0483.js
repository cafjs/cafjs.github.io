(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{V4CB:function(e,a,t){"use strict";t.r(a),t.d(a,"_frontmatter",(function(){return j})),t.d(a,"default",(function(){return v}));var n=t("zLVn"),c=t("q1tI"),s=t.n(c),o=t("7ljp"),l=t("Wbzz"),r=t("LbRr"),p=t("+YzT"),m=t("IP2g"),b=t("wHSu"),i=function(){var e="undefined"!=typeof window&&window.innerWidth>=1200,a=Object(c.useState)(e),t=a[0],n=a[1];Object(c.useEffect)((function(){if("undefined"==typeof window)return function(){};var e=function(){n(window.innerWidth>=1200)};window.addEventListener("resize",e);var a=document.getElementById("docs-sidebar-toggler"),c=function(){n(!t)};return a&&a.addEventListener("click",c),function(){window.removeEventListener("resize",e),a&&a.removeEventListener("click",c)}}));var o="docs-sidebar "+(t?"sidebar-visible":"sidebar-hidden");return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{id:"docs-sidebar",className:o},s.a.createElement(p.a,{id:"docs-nav",className:"docs-nav navbar",onSelect:function(e){n(window.innerWidth>=1200)}},s.a.createElement("ul",{className:"section-items list-unstyled nav flex-column pb-3"},s.a.createElement(p.a.Item,{className:"section-title"},s.a.createElement(p.a.Link,{className:"scrollto",href:"#getting-started"},s.a.createElement(m.a,{className:"fa-fw",icon:b.a})," Getting Started")),s.a.createElement(p.a.Item,null,s.a.createElement(p.a.Link,{className:"scrollto",href:"#install"},"Install")),s.a.createElement(p.a.Item,null,s.a.createElement(p.a.Link,{className:"scrollto",href:"#headless-example"},"Headless Example")),s.a.createElement(p.a.Item,null,s.a.createElement(p.a.Link,{className:"scrollto",href:"#add-react-frontend"},"Add React Frontend")),s.a.createElement(p.a.Item,null,s.a.createElement(p.a.Link,{className:"scrollto",href:"#add-device"},"Add Device")),s.a.createElement(p.a.Item,null,s.a.createElement(p.a.Link,{className:"scrollto",href:"#three-way-isomorphic"},"Three-Way Iso")),s.a.createElement(p.a.Item,{className:"nav-item section-title mt-3"},s.a.createElement(p.a.Link,{className:"scrollto",href:"#concepts"},s.a.createElement(m.a,{className:"fa-fw",icon:b.d})," Concepts")),s.a.createElement(p.a.Item,null,s.a.createElement(p.a.Link,{className:"scrollto",href:"#components"},"Components")),s.a.createElement(p.a.Item,null,s.a.createElement(p.a.Link,{className:"scrollto",href:"#cloud-assistant"},"Cloud Assistant")),s.a.createElement(p.a.Item,null,s.a.createElement(p.a.Link,{className:"scrollto",href:"#autonomous"},"Autonomous")),s.a.createElement(p.a.Item,null,s.a.createElement(p.a.Link,{className:"scrollto",href:"#client"},"Client")),s.a.createElement(p.a.Item,null,s.a.createElement(p.a.Link,{className:"scrollto",href:"#trusted-bus"},"Trusted Bus")),s.a.createElement(p.a.Item,null,s.a.createElement(p.a.Link,{className:"scrollto",href:"#sharing-actors"},"Sharing Actors")),s.a.createElement(p.a.Item,null,s.a.createElement(p.a.Link,{className:"scrollto",href:"#publish-subscribe"},"Publish Subscribe")),s.a.createElement(p.a.Item,null,s.a.createElement(p.a.Link,{className:"scrollto",href:"#iot-device"},"IoT Device")),s.a.createElement(p.a.Item,{className:"nav-item section-title mt-3"},s.a.createElement(p.a.Link,{className:"scrollto",href:"#apis"},s.a.createElement(m.a,{className:"fa-fw",icon:b.c})," APIs")),s.a.createElement(p.a.Item,{className:"nav-item section-title mt-3"},s.a.createElement(p.a.Link,{className:"scrollto",href:"#tools"},s.a.createElement(m.a,{className:"fa-fw",icon:b.f})," Tools")),s.a.createElement(p.a.Item,{className:"nav-item section-title mt-3"},s.a.createElement(p.a.Link,{className:"scrollto",href:"#resources"},s.a.createElement(m.a,{className:"fa-fw",icon:b.b})," Resources"))))))},d=t("7vrA"),u={DocsSidebar:i,DocsContent:function(e){var a=e.children;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"docs-content"},s.a.createElement(d.a,null,a)))},DocsArticle:function(e){var a=e.children,t=e.id;return s.a.createElement(s.a.Fragment,null,s.a.createElement("article",{id:t,className:"docs-article scroll-offset"},a))},DocsSection:function(e){var a=e.children,t=e.id;return s.a.createElement(s.a.Fragment,null,s.a.createElement("section",{id:t,className:"docs-section scroll-offset"},a))},h1:function(e){var a=e.children;return s.a.createElement("h1",{className:"docs-heading"},a)},h2:function(e){var a=e.children;return s.a.createElement("h2",{className:"section-heading"},a)}},N=function(e){var a=e.children,t=(e.pageInfo,Object(l.c)("2523598690"));return s.a.createElement(o.a,{components:u},s.a.createElement(r.a,{siteTitle:t.site.siteMetadata.title,isDocs:!0}),s.a.createElement("div",{className:"docs-wrapper"},a),s.a.createElement("footer",null,s.a.createElement("div",{className:"footer-bottom text-center py-5"},s.a.createElement("span",null,"Â© Copyright ",(new Date).getFullYear()," Caf.js Labs LLC"))))},j={},O=function(e){return function(a){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),Object(o.b)("div",a)}},h=O("DocsSidebar"),g=O("DocsContent"),k=O("DocsArticle"),f=O("DocsSection"),y={_frontmatter:j},w=N;function v(e){var a=e.components,t=Object(n.a)(e,["components"]);return Object(o.b)(w,Object.assign({},y,t,{components:a,mdxType:"MDXLayout"}),Object(o.b)(h,{mdxType:"DocsSidebar"}),Object(o.b)(g,{mdxType:"DocsContent"},Object(o.b)(k,{id:"getting-started",mdxType:"DocsArticle"},Object(o.b)("h1",null,"Getting Started"),Object(o.b)(f,{id:"install",mdxType:"DocsSection"},Object(o.b)("h2",null,"Install"),Object(o.b)("p",null,"This repository is managed as a monorepo using Yarn workspaces. It contains a consistent snapshot of all the other ",Object(o.b)("code",{parentName:"p",className:"language-text"},"Caf.js")," sub-projects, included as git submodules."),Object(o.b)("p",null,"Write your app in a subdirectory of ",Object(o.b)("code",{parentName:"p",className:"language-text"},"caf/playground/app"),", and yarn workspaces will also manage your app dependencies. This is recommended because it guarantees that all your ",Object(o.b)("code",{parentName:"p",className:"language-text"},"Caf.js")," dependencies have been tested together. Ditto with your modules under ",Object(o.b)("code",{parentName:"p",className:"language-text"},"caf/playground"),", i.e., they are part of the workspace and do not need to be published during development."),Object(o.b)("p",null,"Install ",Object(o.b)("code",{parentName:"p",className:"language-text"},"node")," >=10 and ",Object(o.b)("code",{parentName:"p",className:"language-text"},"yarn")," >=1.3.2. Our development is mostly on Linux. Note that ",Object(o.b)("code",{parentName:"p",className:"language-text"},"npm")," does not understand Yarn workspaces, you need to use ",Object(o.b)("code",{parentName:"p",className:"language-text"},"yarn"),"."),Object(o.b)("p",null,"Clone this repository (",Object(o.b)("code",{parentName:"p",className:"language-text"},"git clone https://github.com/cafjs/caf.git"),") and update submodules:"),Object(o.b)("div",{className:"gatsby-highlight","data-language":"shell"},Object(o.b)("pre",{parentName:"div",className:"language-shell"},Object(o.b)("code",{parentName:"pre",className:"language-shell"},"    ",Object(o.b)("span",{parentName:"code",className:"token builtin class-name"},"cd")," caf",Object(o.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(o.b)("span",{parentName:"code",className:"token function"},"git")," submodule update --init"))),Object(o.b)("p",null,"Install all the dependencies (it takes about 30s in my laptop):"),Object(o.b)("div",{className:"gatsby-highlight","data-language":"shell"},Object(o.b)("pre",{parentName:"div",className:"language-shell"},Object(o.b)("code",{parentName:"pre",className:"language-shell"},"    ",Object(o.b)("span",{parentName:"code",className:"token function"},"yarn")," run installAll"))),Object(o.b)("p",null,"add to your path the ",Object(o.b)("code",{parentName:"p",className:"language-text"},"cafjs")," tool path:"),Object(o.b)("div",{className:"gatsby-highlight","data-language":"shell"},Object(o.b)("pre",{parentName:"div",className:"language-shell"},Object(o.b)("code",{parentName:"pre",className:"language-shell"},"    ",Object(o.b)("span",{parentName:"code",className:"token builtin class-name"},"export")," ",Object(o.b)("span",{parentName:"code",className:"token assign-left variable"},Object(o.b)("span",{parentName:"span",className:"token environment constant"},"PATH")),Object(o.b)("span",{parentName:"code",className:"token operator"},"="),Object(o.b)("span",{parentName:"code",className:"token operator"},"<"),"your_install_directory",Object(o.b)("span",{parentName:"code",className:"token operator"},">"),"/caf/bin:",Object(o.b)("span",{parentName:"code",className:"token environment constant"},"$PATH")))),Object(o.b)("p",null,"and now let's build and run locally a simple app:"),Object(o.b)("div",{className:"gatsby-highlight","data-language":"shell"},Object(o.b)("pre",{parentName:"div",className:"language-shell"},Object(o.b)("code",{parentName:"pre",className:"language-shell"},"    ",Object(o.b)("span",{parentName:"code",className:"token builtin class-name"},"cd")," apps/caf_helloworld",Object(o.b)("span",{parentName:"code",className:"token punctuation"},";")," cafjs build",Object(o.b)("span",{parentName:"code",className:"token punctuation"},";")," cafjs run helloworld"))),Object(o.b)("p",null,"The first call to ",Object(o.b)("code",{parentName:"p",className:"language-text"},"cafjs run")," may take a few minutes because it downloads the core Docker images. If your connection is slow you may see timeout exceptions, which can be ignored because it continues with the download."),Object(o.b)("p",null,"The app server URL is ",Object(o.b)("a",{parentName:"p",href:"http://root-launcher.vcap.me"},"http://root-launcher.vcap.me")," (DNS always resolves ",Object(o.b)("code",{parentName:"p",className:"language-text"},"*.vcap.me")," to ",Object(o.b)("code",{parentName:"p",className:"language-text"},"127.0.0.1"),", i.e., the local loop). With your browser, login with user ",Object(o.b)("code",{parentName:"p",className:"language-text"},"foo")," and password ",Object(o.b)("code",{parentName:"p",className:"language-text"},"bar"),", and then click the ",Object(o.b)("code",{parentName:"p",className:"language-text"},"+")," icon to add a ",Object(o.b)("code",{parentName:"p",className:"language-text"},"helloworld")," CA. A CA (Cloud Assistant) is a cloud proxy instance for your app. Fill the form as follows:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Application publisher: ",Object(o.b)("code",{parentName:"li",className:"language-text"},"root")),Object(o.b)("li",{parentName:"ul"},"Application name: ",Object(o.b)("code",{parentName:"li",className:"language-text"},"helloworld")),Object(o.b)("li",{parentName:"ul"},"CA name: anything containing ASCII characters and numbers.")),Object(o.b)("p",null,"and a ",Object(o.b)("code",{parentName:"p",className:"language-text"},"counter")," example should appear. Use the ",Object(o.b)("code",{parentName:"p",className:"language-text"},"+")," again to create other CAs, and then select the menu on the top left to switch between them."),Object(o.b)("p",null,"To stop it, a single ",Object(o.b)("code",{parentName:"p",className:"language-text"},"Control-C")," will initiate a gentle container shutdown but, for the impatient, a second ",Object(o.b)("code",{parentName:"p",className:"language-text"},"Control-C")," will brute force a clean-up."),Object(o.b)("p",null,"In both cases we should be able to restart without losing the CA's state. This state is checkpointed using a Redis container that mounts a host volume (log file in ",Object(o.b)("code",{parentName:"p",className:"language-text"},"/tmp/redis/appendonly.aof"),", host port 6380). To start from scratch, delete the log file in the host."),Object(o.b)("p",null,"With the ",Object(o.b)("code",{parentName:"p",className:"language-text"},"cafjs")," command we can also create apps from templates, simulate devices, build container images to publish in our cloud service, i.e., ",Object(o.b)("a",{parentName:"p",href:"https://root-launcher.cafjs.com"},"https://root-launcher.cafjs.com"),", or reset after a hang. See {@link external:caf_dcinabox} (",Object(o.b)("a",{parentName:"p",href:"https://cafjs.github.io/api/caf_dcinabox"},"https://cafjs.github.io/api/caf_dcinabox"),") for details.")),Object(o.b)(f,{id:"headless-example",mdxType:"DocsSection"},Object(o.b)("h2",null,"Headless Example")),Object(o.b)(f,{id:"add-react-frontend",mdxType:"DocsSection"},Object(o.b)("h2",null,"Add a React Frontend")),Object(o.b)(f,{id:"add-device",mdxType:"DocsSection"},Object(o.b)("h2",null,"Add a Device")),Object(o.b)(f,{id:"three-way-isomorphic",mdxType:"DocsSection"},Object(o.b)("h2",null,"Three-way Isomorphic"))),Object(o.b)(k,{id:"concepts",mdxType:"DocsArticle"},Object(o.b)("h1",null,"Concepts"),Object(o.b)(f,{id:"components",mdxType:"DocsSection"},Object(o.b)("h2",null,"Components"),Object(o.b)("div",{className:"gatsby-highlight","data-language":"js"},Object(o.b)("pre",{parentName:"div",className:"language-js"},Object(o.b)("code",{parentName:"pre",className:"language-js"},"exports",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function-variable function"},"newInstance")," ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"async")," ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"function"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token parameter"},"$",Object(o.b)("span",{parentName:"span",className:"token punctuation"},",")," spec"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"let")," isShutdown ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(o.b)("span",{parentName:"code",className:"token boolean"},"false"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"const")," that ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",Object(o.b)("span",{parentName:"code",className:"token function"},"hello"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            ",Object(o.b)("span",{parentName:"code",className:"token operator"},"!"),"isShutdown ",Object(o.b)("span",{parentName:"code",className:"token operator"},"&&")," console",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function"},"log"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),"spec",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),"name ",Object(o.b)("span",{parentName:"code",className:"token operator"},"+")," ",Object(o.b)("span",{parentName:"code",className:"token string"},"':'")," ",Object(o.b)("span",{parentName:"code",className:"token operator"},"+")," spec",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),"env",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),"msg",Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n        ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"async")," ",Object(o.b)("span",{parentName:"code",className:"token function"},"__ca_checkup__"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token parameter"},"data"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"return")," isShutdown ",Object(o.b)("span",{parentName:"code",className:"token operator"},"?")," ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(o.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(o.b)("span",{parentName:"code",className:"token class-name"},"Error"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token string"},"'Shutdown'"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"]")," ",Object(o.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n        ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},","),"\n        ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"async")," ",Object(o.b)("span",{parentName:"code",className:"token function"},"__ca_shutdown__"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token parameter"},"data"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            isShutdown ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(o.b)("span",{parentName:"code",className:"token boolean"},"true"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n            $ ",Object(o.b)("span",{parentName:"code",className:"token operator"},"&&")," ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),"$",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"["),"spec",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),"name",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"]")," ",Object(o.b)("span",{parentName:"code",className:"token operator"},"===")," that",Object(o.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(o.b)("span",{parentName:"code",className:"token operator"},"&&")," ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"delete")," $",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"["),"spec",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),"name",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n            ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"return")," ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n        ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n    ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"return")," ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(o.b)("span",{parentName:"code",className:"token keyword"},"null"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},",")," that",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"))))),Object(o.b)(f,{id:"cloud-assistant",mdxType:"DocsSection"},Object(o.b)("h2",null,"Cloud Assistant")),Object(o.b)(f,{id:"autonomous",mdxType:"DocsSection"},Object(o.b)("h2",null,"Autonomous Computation")),Object(o.b)(f,{id:"client",mdxType:"DocsSection"},Object(o.b)("h2",null,"Client Library")),Object(o.b)(f,{id:"trusted-bus",mdxType:"DocsSection"},Object(o.b)("h2",null,"Trusted Bus")),Object(o.b)(f,{id:"sharing-actors",mdxType:"DocsSection"},Object(o.b)("h2",null,"Sharing Actors")),Object(o.b)(f,{id:"publish-subscribe",mdxType:"DocsSection"},Object(o.b)("h2",null,"Publish-Subscribe")),Object(o.b)(f,{id:"iot-device",mdxType:"DocsSection"},Object(o.b)("h2",null,"IoT Device"))),Object(o.b)(k,{id:"apis",mdxType:"DocsArticle"},Object(o.b)("h1",null,"APIs")),Object(o.b)(k,{id:"tools",mdxType:"DocsArticle"},Object(o.b)("h1",null,"Tools")),Object(o.b)(k,{id:"resources",mdxType:"DocsArticle"},Object(o.b)("h1",null,"Resources"))))}v.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-docs-documentation-mdx-94cd4658a6c8923d0483.js.map